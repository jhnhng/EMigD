<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Setting Up the Data • EMigD</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Setting Up the Data">
<meta property="og:description" content="EMigD">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EMigD</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.2.500</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01%20Setting%20Up%20the%20Data.html">Setting Up the Data</a>
    </li>
    <li>
      <a href="../articles/02%20Different%20intervals%20between%20seasons.html">Different intervals between seasons</a>
    </li>
    <li>
      <a href="../articles/03%20Using-EmigD.html">Using the functions in `EMigD`</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Setting Up the Data</h1>
            
      
      
      <div class="hidden name"><code>01 Setting Up the Data.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">EMigD</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="setting-up-the-data">Setting Up the Data<a class="anchor" aria-label="anchor" href="#setting-up-the-data"></a>
</h2>
<p>The example shown below is one of many ways the data could be
processed. The important components required is a <code>list</code>
object containing home range kernels for each interval that is created
for at least one individual.</p>
<p>For example, for a single individual if I wanted to break a one month
period into 10-day intervals I would get a total of three 10-day
intervals. These intervals should be in a <code>list</code> object, and
each element within the <code>list</code> should represent a single
interval.</p>
<p>The selected periods to be divided into intervals should be chosen so
that they fall between migratory trips and don’t overlap them. For
example if individuals typically begin their migratory trip in spring
and fall, the selected periods should not overlap spring and fall, and
should be during the winter and summer seasons.</p>
<div class="section level3">
<h3 id="create-intervals">Create Intervals<a class="anchor" aria-label="anchor" href="#create-intervals"></a>
</h3>
<p>We created 10-day intervals for deer in the January and July. We
first created a <code>start</code> column using the
<code>floor_Date()</code> function to obtain the 10-day extents within
the months. We included the 31st day (if a month had 31 days) in the
third 10-day interval to prevent the creation of a 4th 10-day interval
with only a single day in it.</p>
</div>
<div class="section level3">
<h3 id="intervals-for-january">Intervals for January<a class="anchor" aria-label="anchor" href="#intervals-for-january"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">jan</span> <span class="op">&lt;-</span> <span class="va">deer</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="co"># Creates a start column assigning the first day in the 10-day interval in which</span>
  <span class="co"># the date falls under (e.g., 01-03-2021 would be in the first 10-day interval</span>
  <span class="co"># so the `floor_date` assigned to it would be 01-01-2021)</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html" class="external-link">floor_date</a></span><span class="op">(</span><span class="va">date</span>, <span class="st">"10 days"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="co"># For any months that has 31 days, the 31st day would normally be assigned its </span>
  <span class="co"># own interval. The code below takes the 31st day and joins it with the </span>
  <span class="co"># previous interval. </span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">ID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html" class="external-link">day</a></span><span class="op">(</span><span class="va">start</span><span class="op">)</span> <span class="op">==</span> <span class="fl">31</span>, <span class="va">start</span> <span class="op">-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">days</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>, <span class="va">start</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">start</span>, .add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html" class="external-link">group_split</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="intervals-for-july">Intervals for July<a class="anchor" aria-label="anchor" href="#intervals-for-july"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">july</span> <span class="op">&lt;-</span> <span class="va">deer</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="co"># Creates a start column assigning the first day in the 10-day interval in which</span>
  <span class="co"># the date falls under (e.g., 01-03-2021 would be in the first 10-day interval</span>
  <span class="co"># so the `floor_date` assigned to it would be 01-01-2021)</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html" class="external-link">floor_date</a></span><span class="op">(</span><span class="va">date</span>, <span class="st">"10 days"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="co"># For any months that has 31 days, the 31st day would normally be assigned its </span>
  <span class="co"># own interval. The code below takes the 31st day and joins it with the </span>
  <span class="co"># previous interval. </span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">ID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html" class="external-link">day</a></span><span class="op">(</span><span class="va">start</span><span class="op">)</span> <span class="op">==</span> <span class="fl">31</span>, <span class="va">start</span> <span class="op">-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">days</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>, <span class="va">start</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">start</span>, .add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"7"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html" class="external-link">group_split</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Elements in the list for one individual in January:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">jan</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt; &lt;list_of&lt;</span>
<span class="co">#&gt;   tbl_df&lt;</span>
<span class="co">#&gt;     date  : date</span>
<span class="co">#&gt;     utm_x : double</span>
<span class="co">#&gt;     utm_y : double</span>
<span class="co">#&gt;     ID    : character</span>
<span class="co">#&gt;     julian: double</span>
<span class="co">#&gt;     month : double</span>
<span class="co">#&gt;     year  : double</span>
<span class="co">#&gt;     start : date</span>
<span class="co">#&gt;   &gt;</span>
<span class="co">#&gt; &gt;[3]&gt;</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 17 x 8</span></span>
<span class="co">#&gt;    date         utm_x    utm_y ID    julian month  year start     </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2013-01-01 <span style="text-decoration: underline;">394</span>353. 4<span style="text-decoration: underline;">222</span>160. A          1     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2013-01-04 <span style="text-decoration: underline;">425</span>764. 4<span style="text-decoration: underline;">269</span>724. A          4     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2013-01-07 <span style="text-decoration: underline;">426</span>686. 4<span style="text-decoration: underline;">244</span>820. A          7     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2013-01-10 <span style="text-decoration: underline;">385</span>763. 4<span style="text-decoration: underline;">176</span>823. A         10     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2013-01-03 <span style="text-decoration: underline;">444</span>235. 4<span style="text-decoration: underline;">136</span>620. A          3     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2013-01-06 <span style="text-decoration: underline;">281</span>915. 4<span style="text-decoration: underline;">194</span>640. A          6     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2013-01-09 <span style="text-decoration: underline;">316</span>328. 4<span style="text-decoration: underline;">247</span>506. A          9     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2013-01-02 <span style="text-decoration: underline;">444</span>606. 4<span style="text-decoration: underline;">220</span>499. A          2     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2013-01-05 <span style="text-decoration: underline;">413</span>878. 4<span style="text-decoration: underline;">105</span>887. A          5     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2013-01-08 <span style="text-decoration: underline;">436</span>514. 4<span style="text-decoration: underline;">239</span>651. A          8     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 2013-01-01 <span style="text-decoration: underline;">447</span>905. 4<span style="text-decoration: underline;">140</span>465. A          1     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 2013-01-04 <span style="text-decoration: underline;">399</span>696. 4<span style="text-decoration: underline;">271</span>535. A          4     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 2013-01-07 <span style="text-decoration: underline;">270</span>352. 4<span style="text-decoration: underline;">163</span>344. A          7     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">14</span> 2013-01-10 <span style="text-decoration: underline;">403</span>482. 4<span style="text-decoration: underline;">166</span>581. A         10     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">15</span> 2013-01-03 <span style="text-decoration: underline;">343</span>761. 4<span style="text-decoration: underline;">121</span>445. A          3     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">16</span> 2013-01-06 <span style="text-decoration: underline;">371</span>862. 4<span style="text-decoration: underline;">129</span>096. A          6     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">17</span> 2013-01-09 <span style="text-decoration: underline;">239</span>170. 4<span style="text-decoration: underline;">216</span>780. A          9     1  <span style="text-decoration: underline;">2</span>013 2013-01-01</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 16 x 8</span></span>
<span class="co">#&gt;    date         utm_x    utm_y ID    julian month  year start     </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2013-01-13 <span style="text-decoration: underline;">243</span>076. 4<span style="text-decoration: underline;">183</span>446. A         13     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2013-01-16 <span style="text-decoration: underline;">277</span>679. 4<span style="text-decoration: underline;">168</span>675. A         16     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2013-01-19 <span style="text-decoration: underline;">306</span>373. 4<span style="text-decoration: underline;">188</span>378. A         19     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2013-01-12 <span style="text-decoration: underline;">442</span>920. 4<span style="text-decoration: underline;">195</span>152. A         12     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2013-01-15 <span style="text-decoration: underline;">441</span>155. 4<span style="text-decoration: underline;">203</span>151. A         15     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2013-01-18 <span style="text-decoration: underline;">369</span>790. 4<span style="text-decoration: underline;">240</span>183. A         18     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2013-01-11 <span style="text-decoration: underline;">303</span>512. 4<span style="text-decoration: underline;">209</span>028. A         11     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2013-01-14 <span style="text-decoration: underline;">308</span>519. 4<span style="text-decoration: underline;">221</span>374. A         14     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2013-01-17 <span style="text-decoration: underline;">374</span>148. 4<span style="text-decoration: underline;">162</span>971. A         17     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2013-01-20 <span style="text-decoration: underline;">397</span>508. 4<span style="text-decoration: underline;">097</span>868. A         20     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 2013-01-13 <span style="text-decoration: underline;">320</span>893. 4<span style="text-decoration: underline;">225</span>999. A         13     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 2013-01-16 <span style="text-decoration: underline;">241</span>850. 4<span style="text-decoration: underline;">209</span>139. A         16     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 2013-01-19 <span style="text-decoration: underline;">262</span>219. 4<span style="text-decoration: underline;">270</span>200. A         19     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">14</span> 2013-01-12 <span style="text-decoration: underline;">257</span>607. 4<span style="text-decoration: underline;">269</span>495. A         12     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">15</span> 2013-01-15 <span style="text-decoration: underline;">371</span>683. 4<span style="text-decoration: underline;">170</span>130. A         15     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">16</span> 2013-01-18 <span style="text-decoration: underline;">259</span>174. 4<span style="text-decoration: underline;">101</span>256. A         18     1  <span style="text-decoration: underline;">2</span>013 2013-01-11</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 19 x 8</span></span>
<span class="co">#&gt;    date         utm_x    utm_y ID    julian month  year start     </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2013-01-22 <span style="text-decoration: underline;">257</span>936. 4<span style="text-decoration: underline;">152</span>519. A         22     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2013-01-25 <span style="text-decoration: underline;">379</span>787. 4<span style="text-decoration: underline;">205</span>195. A         25     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2013-01-28 <span style="text-decoration: underline;">352</span>528. 4<span style="text-decoration: underline;">174</span>215. A         28     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2013-01-31 <span style="text-decoration: underline;">426</span>091. 4<span style="text-decoration: underline;">202</span>516. A         31     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2013-01-21 <span style="text-decoration: underline;">412</span>662. 4<span style="text-decoration: underline;">219</span>820. A         21     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2013-01-24 <span style="text-decoration: underline;">374</span>377. 4<span style="text-decoration: underline;">181</span>390. A         24     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2013-01-27 <span style="text-decoration: underline;">383</span>701. 4<span style="text-decoration: underline;">112</span>081. A         27     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2013-01-30 <span style="text-decoration: underline;">268</span>919. 4<span style="text-decoration: underline;">211</span>473. A         30     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2013-01-23 <span style="text-decoration: underline;">371</span>091. 4<span style="text-decoration: underline;">139</span>747. A         23     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2013-01-26 <span style="text-decoration: underline;">290</span>570. 4<span style="text-decoration: underline;">188</span>197. A         26     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 2013-01-29 <span style="text-decoration: underline;">384</span>754. 4<span style="text-decoration: underline;">269</span>268. A         29     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 2013-01-22 <span style="text-decoration: underline;">346</span>652. 4<span style="text-decoration: underline;">207</span>052. A         22     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 2013-01-25 <span style="text-decoration: underline;">257</span>383. 4<span style="text-decoration: underline;">203</span>716. A         25     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">14</span> 2013-01-28 <span style="text-decoration: underline;">251</span>854. 4<span style="text-decoration: underline;">162</span>917. A         28     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">15</span> 2013-01-31 <span style="text-decoration: underline;">334</span>382. 4<span style="text-decoration: underline;">218</span>896. A         31     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">16</span> 2013-01-21 <span style="text-decoration: underline;">375</span>032. 4<span style="text-decoration: underline;">117</span>669. A         21     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">17</span> 2013-01-24 <span style="text-decoration: underline;">299</span>099. 4<span style="text-decoration: underline;">242</span>995. A         24     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">18</span> 2013-01-27 <span style="text-decoration: underline;">313</span>090. 4<span style="text-decoration: underline;">107</span>096. A         27     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">19</span> 2013-01-30 <span style="text-decoration: underline;">302</span>671. 4<span style="text-decoration: underline;">257</span>404. A         30     1  <span style="text-decoration: underline;">2</span>013 2013-01-21</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="create-tracks-for-each-interval">Create Tracks for Each Interval<a class="anchor" aria-label="anchor" href="#create-tracks-for-each-interval"></a>
</h2>
<p>Before we estimate LoCoH home range for each of these 10-day
intervals, we first create objects of class <code>track_xyt</code> using
<code>make_track()</code> from the <code>amt</code> package. This
function creates a <code>track</code> using the <code>utm_x</code> and
<code>utm_y</code> columns from <code>jan</code> and <code>july</code>.
<code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code> allows us to apply the specified function across a
<code>list</code> object (e.g., <code>jan</code> and
<code>july</code>)</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">track_list_sum</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">july</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">amt</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/amt/man/track.html" class="external-link">make_track</a></span><span class="op">(</span>tbl <span class="op">=</span> <span class="va">x</span>, .x <span class="op">=</span> <span class="va">utm_x</span>, .y <span class="op">=</span> <span class="va">utm_y</span>, .t <span class="op">=</span> <span class="va">date</span>,
             uid <span class="op">=</span> <span class="va">ID</span>,
             <span class="co"># lat/long: 4326 (lat/long, WGS84 datum).</span>
             <span class="co"># utm: crs = sp::CRS("+init=epsg:32612"))</span>
             crs <span class="op">=</span> <span class="fl">32612</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="va">track_list_win</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">jan</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">amt</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/amt/man/track.html" class="external-link">make_track</a></span><span class="op">(</span>tbl <span class="op">=</span> <span class="va">x</span>, .x <span class="op">=</span> <span class="va">utm_x</span>, .y <span class="op">=</span> <span class="va">utm_y</span>, .t <span class="op">=</span> <span class="va">date</span>,
             uid <span class="op">=</span> <span class="va">ID</span>,
             crs <span class="op">=</span> <span class="fl">32612</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creates-locohs-using-the-tracks">Creates LoCoHs Using the Tracks<a class="anchor" aria-label="anchor" href="#creates-locohs-using-the-tracks"></a>
</h2>
<p>Using the <code>track</code> created for the <code>jan</code> and
<code>july</code>, we estimate type “a” LoCoH home range using
<code>hr_locoh()</code> from the <code>amt</code> package. If you would
like to learn more about the arguments of this function please refer to
<code><a href="https://rdrr.io/pkg/amt/man/hrest.html" class="external-link">?amt::hr_locoh</a></code> for more details.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sum_locoh</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">track_list_sum</span>, <span class="kw">function</span><span class="op">(</span><span class="va">tracks</span><span class="op">)</span><span class="op">{</span>
    <span class="co"># Calculate LoCoH a*</span>
    <span class="va">dmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/dist.html" class="external-link">dist</a></span><span class="op">(</span><span class="va">tracks</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x_"</span>, <span class="st">"y_"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
    <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">dmat</span><span class="op">)</span>

    <span class="co"># Fit LoCoH</span>
    <span class="va">locoh</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">amt</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/amt/man/hrest.html" class="external-link">hr_locoh</a></span><span class="op">(</span>
      x <span class="op">=</span> <span class="va">tracks</span>,
      levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,
      keep.data <span class="op">=</span> <span class="cn">TRUE</span>,
      n <span class="op">=</span> <span class="va">a</span>,
      type <span class="op">=</span> <span class="st">"a"</span>,
      rand_buffer <span class="op">=</span> <span class="fl">1e-05</span>
    <span class="op">)</span><span class="op">)</span>
    
    
<span class="op">}</span><span class="op">)</span>
<span class="va">win_locoh</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">track_list_win</span>, <span class="kw">function</span><span class="op">(</span><span class="va">tracks</span><span class="op">)</span><span class="op">{</span>
    <span class="co"># Calculate LoCoH a*</span>
    <span class="va">dmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/dist.html" class="external-link">dist</a></span><span class="op">(</span><span class="va">tracks</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x_"</span>, <span class="st">"y_"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
    <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">dmat</span><span class="op">)</span>

    <span class="co"># Fit LoCoH</span>
    <span class="va">locoh</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">amt</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/amt/man/hrest.html" class="external-link">hr_locoh</a></span><span class="op">(</span>
      x <span class="op">=</span> <span class="va">tracks</span>,
      levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,
      keep.data <span class="op">=</span> <span class="cn">TRUE</span>,
      n <span class="op">=</span> <span class="va">a</span>,
      type <span class="op">=</span> <span class="st">"a"</span>,
      rand_buffer <span class="op">=</span> <span class="fl">1e-05</span>
    <span class="op">)</span><span class="op">)</span>
    
    
<span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creates-isopleths-from-the-locohs">Creates Isopleths from the LoCoHs<a class="anchor" aria-label="anchor" href="#creates-isopleths-from-the-locohs"></a>
</h2>
<p>We then created isopleths from the LoCoH home range estimates using
<code>hr_isopleths()</code>from the <code>amt</code> package.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sum_iso</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">sum_locoh</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span>
  <span class="fu">amt</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/amt/man/hr_isopleths.html" class="external-link">hr_isopleths</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="va">win_iso</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">win_locoh</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span>
  <span class="fu">amt</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/amt/man/hr_isopleths.html" class="external-link">hr_isopleths</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="rasterizes-the-isopleths">Rasterizes the Isopleths<a class="anchor" aria-label="anchor" href="#rasterizes-the-isopleths"></a>
</h2>
<p>After creating isopleths for each of the intervals, we have to
rasterize them. Similar to the the previous functions, we use
<code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code> to apply our function across our <code>list</code>
object. We first select the resolution for that we want for our rasters
(<code>res</code>). We then create a template raster with a resolution
of <code>res</code> (keep in mind that the speed the isopleths are
<code>rasterize()</code> will be dependent on the specified resolution,
with time of processing increasing with smaller resolutions). The
projection of the template raster will match that of the specified
isopleth.</p>
<p>After creating rasters for each interval, we then subtract all the
isopleth values from 1, then normalize them.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fl">250</span>

<span class="va">sum_raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">sum_iso</span>, <span class="kw">function</span><span class="op">(</span><span class="va">iso</span><span class="op">)</span><span class="op">{</span>
<span class="co"># Creates template raster</span>
    <span class="va">template_raster</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="va">iso</span>,
      resolution <span class="op">=</span> <span class="va">res</span>, vals <span class="op">=</span> <span class="fl">0</span>,
      crs <span class="op">=</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">iso</span><span class="op">)</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
    <span class="op">)</span>
    <span class="co"># Rasterizes the isopleth</span>
    <span class="va">raster_locoh</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/rasterize.html" class="external-link">rasterize</a></span><span class="op">(</span><span class="va">iso</span>,
      <span class="va">template_raster</span>,
      field <span class="op">=</span> <span class="st">"level"</span>,
      fun <span class="op">=</span> <span class="st">"first"</span>
    <span class="op">)</span>

    <span class="co"># Now you want to subtract all the isopleth values from 1</span>
    <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html" class="external-link">values</a></span><span class="op">(</span><span class="va">raster_locoh</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html" class="external-link">values</a></span><span class="op">(</span><span class="va">raster_locoh</span><span class="op">)</span>

    <span class="co"># Now normalize</span>
    <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">raster_locoh</span> <span class="op">/</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellStats.html" class="external-link">cellStats</a></span><span class="op">(</span><span class="va">raster_locoh</span>, <span class="va">sum</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="va">win_raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">win_iso</span>, <span class="kw">function</span><span class="op">(</span><span class="va">iso</span><span class="op">)</span><span class="op">{</span>
<span class="co"># Creates template raster</span>
    <span class="va">template_raster</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="va">iso</span>,   
      resolution <span class="op">=</span> <span class="va">res</span>, vals <span class="op">=</span> <span class="fl">0</span>,
      crs <span class="op">=</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">iso</span><span class="op">)</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
    <span class="op">)</span>
    <span class="co"># Rasterizes the isopleth</span>
    <span class="va">raster_locoh</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/rasterize.html" class="external-link">rasterize</a></span><span class="op">(</span><span class="va">iso</span>,
      <span class="va">template_raster</span>,
      field <span class="op">=</span> <span class="st">"level"</span>,
      fun <span class="op">=</span> <span class="st">"first"</span>
    <span class="op">)</span>

    <span class="co"># Now you want to subtract all the isopleth values from 1</span>
    <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html" class="external-link">values</a></span><span class="op">(</span><span class="va">raster_locoh</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html" class="external-link">values</a></span><span class="op">(</span><span class="va">raster_locoh</span><span class="op">)</span>

    <span class="co"># Now normalize</span>
    <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">raster_locoh</span> <span class="op">/</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellStats.html" class="external-link">cellStats</a></span><span class="op">(</span><span class="va">raster_locoh</span>, <span class="va">sum</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">win_raster</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">jan</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">ID</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                                            <span class="va">x</span><span class="op">$</span><span class="va">year</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, sep <span class="op">=</span> <span class="st">'_'</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">sum_raster</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">july</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">ID</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                                              <span class="va">x</span><span class="op">$</span><span class="va">year</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, sep <span class="op">=</span> <span class="st">'_'</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="section level3">
<h3 id="attach-attributes-to-each-list-of-rasters">Attach attributes to each list of rasters<a class="anchor" aria-label="anchor" href="#attach-attributes-to-each-list-of-rasters"></a>
</h3>
<p>We attach attributes to our list of rasters to allow for more
flexibility in working with our lists of rasters.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Add an attribute to hold the attributes of each list element</span>
<span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">win_raster</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">jan</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">ID</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,
                                      interval_start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">jan</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">start</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,
                                      year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">jan</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">year</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>

<span class="co"># Check the attributes</span>
<span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">win_raster</span><span class="op">)</span>

<span class="co"># Add an attribute "tab" to hold the attributes of each list element</span>
<span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">sum_raster</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">july</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">ID</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,
                                      interval_start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">july</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">start</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>,
                                      year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">july</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">year</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>

<span class="co"># Check the attributes</span>
<span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">sum_raster</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="setting-up-input-for-calculating-emds-in-environmental-space">Setting up input for Calculating EMDs in Environmental Space<a class="anchor" aria-label="anchor" href="#setting-up-input-for-calculating-emds-in-environmental-space"></a>
</h2>
<p>The data set up above have specifically focused on setting up the
data for calculating EMDs in geographical space. The code below
demonstrates how you can set up the data to calculate the EMDs in
environmental space.</p>
<div class="section level3">
<h3 id="creating-rasterstacks-to-calculate-emd-and-em-speeds-in-environmental-space">Creating ‘RasterStacks’ to calculate EMD and ’EM-Speeds in
Environmental Space<a class="anchor" aria-label="anchor" href="#creating-rasterstacks-to-calculate-emd-and-em-speeds-in-environmental-space"></a>
</h3>
<div class="section level4">
<h4 id="environmental-covariates-without-temporal-variation">Environmental Covariates without Temporal Variation<a class="anchor" aria-label="anchor" href="#environmental-covariates-without-temporal-variation"></a>
</h4>
<p>We first import the environmental covariate file (e.g., DEM layer),
then we re-project the extent from latitude and longitude to UTMs to
match those of the home range rasters.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="co">#Load raster</span>
  <span class="va">UtahDEM</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Utah_DEM.tif"</span>, package <span class="op">=</span> <span class="st">"EMigD"</span><span class="op">)</span><span class="op">)</span>
  <span class="va">out_proj</span> <span class="op">&lt;-</span> <span class="st">"+proj=utm +zone=12 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"</span>
  <span class="va">UtahDEM</span><span class="op">@</span><span class="va">extent</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html" class="external-link">extent</a></span><span class="op">(</span><span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/projectRaster.html" class="external-link">projectExtent</a></span><span class="op">(</span><span class="va">UtahDEM</span>, <span class="va">out_proj</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The <code><a href="../reference/env_raster_stack.html">env_raster_stack()</a></code> function takes the environmental
covariate raster and resamples it to the home range rasters. It then
takes the resampled rasters and the home range rasters and constructs a
object with class <code>RasterStack</code>. The steps following the
creation of these <code>RasterStacks</code> is the steps under “Earth
Mover’s Distance”, where the <code>RasterLayers</code> objects (i.e.,
<code>sum_raster</code> and <code>win_raster</code>) are replaced with
the <code>RasterStack</code> objects (i.e., <code>sum_rst</code> and
<code>win_rst</code>).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sum_rst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/env_raster_stack.html">env_raster_stack</a></span><span class="op">(</span><span class="va">UtahDEM</span>, <span class="va">sum_raster</span><span class="op">)</span>
<span class="va">win_rst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/env_raster_stack.html">env_raster_stack</a></span><span class="op">(</span><span class="va">UtahDEM</span>, <span class="va">win_raster</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="environmental-covariates-with-temporal-variation">Environmental Covariates with Temporal Variation<a class="anchor" aria-label="anchor" href="#environmental-covariates-with-temporal-variation"></a>
</h4>
<p>For environmental covariates that vary across time (e.g.,
temperature, snow depth, foraging resources, precipitation, etc.), we
first assign the file names of which the covariates are housed to
<code>list_names</code>. In our example, we use Rangeland Analysis
Platform (RAP) data in 2013 and 2014 that can be an indicator of forage
resources on the landscape.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">list_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"EMigD"</span><span class="op">)</span>,
                 pattern<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RAP"</span>,<span class="st">"*.tif"</span><span class="op">)</span>, all.files<span class="op">=</span> <span class="cn">FALSE</span>,
                 full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> 

<span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">list_names</span><span class="op">)</span>
<span class="co">#&gt; [1] "2013_RAP.tif" "2014_RAP.tif"</span></code></pre></div>
<p>We then read in those files into R as <code>RasterLayer</code>
objects. For each of those <code>list</code> elements in
<code>env_lists</code> we assign the path names for each of those files.
Using the assigned names, we created attributes(metadata) for our list
with a <code>year</code> column. The <code>year</code> column may change
depending on the temporal scale of your environmental covariate. For
example, if we had environmental covariates that changed daily, we can
first aggregate the daily covariates based the intervals. Instead of
using <code>year</code>, we would then use the start date of the
intervals.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Rasterize the environmental covariates</span>
<span class="va">env_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">list_names</span>, <span class="fu">raster</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">env_list</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">list_names</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Uses the name of the environemntal covariate file to assign attributes </span>
<span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">env_list</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/trimws.html" class="external-link">trimws</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">env_list</span><span class="op">)</span><span class="op">)</span>, 
                                                 whitespace <span class="op">=</span> <span class="st">"_.*"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">env_list</span><span class="op">)</span>
<span class="co">#&gt; $year</span>
<span class="co">#&gt; [1] "2013" "2014"</span></code></pre></div>
<p>We use <code>env_raster_stack</code> with the addition of the
<code>attribute</code> argument to stack environmental covariate layers
with our home range rasters. The input for the <code>attribute</code>
argument should be a attribute component that is the same in both of the
<code>list</code> objects (i.e., env_list and sum_raster/win_raster)
with the same unique values. For example, both <code>env_list</code> and
<code>sum_raster</code>/<code>win_raster</code> have a attribute
component labelled <code>year</code> and both have the same unique
values (e.g., 2013 and 2014).</p>
<p>NOTE: Currently this feature assumes that only environmental layers
relevant to <code>sum_raster</code> or <code>win_raster</code> are being
used and are in the same folder(i.e., excluding any that are not present
in <code>sum_raster</code> and/or <code>win_raster</code>.)</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sum_rst_temporal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/env_raster_stack.html">env_raster_stack</a></span><span class="op">(</span><span class="va">env_list</span>, <span class="va">sum_raster</span>, attribute <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span>
<span class="va">win_rst_temporal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/env_raster_stack.html">env_raster_stack</a></span><span class="op">(</span><span class="va">env_list</span>, <span class="va">win_raster</span>, attribute <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by John Huang.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.9000.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
